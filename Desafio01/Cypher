///////////////////////////////////////////////////////////////////////////////
// 1. CONSTRAINTS (Garantem unicidade e integridade do modelo)
///////////////////////////////////////////////////////////////////////////////

CREATE CONSTRAINT user_id_unique IF NOT EXISTS
FOR (u:User)
REQUIRE u.id IS UNIQUE;

CREATE CONSTRAINT movie_title_unique IF NOT EXISTS
FOR (m:Movie)
REQUIRE m.title IS UNIQUE;

CREATE CONSTRAINT series_title_unique IF NOT EXISTS
FOR (s:Series)
REQUIRE s.title IS UNIQUE;

CREATE CONSTRAINT genre_name_unique IF NOT EXISTS
FOR (g:Genre)
REQUIRE g.name IS UNIQUE;

CREATE CONSTRAINT actor_name_unique IF NOT EXISTS
FOR (a:Actor)
REQUIRE a.name IS UNIQUE;

CREATE CONSTRAINT director_name_unique IF NOT EXISTS
FOR (d:Director)
REQUIRE d.name IS UNIQUE;


///////////////////////////////////////////////////////////////////////////////
// 2. USERS (10 usuários com nomes reais e IDs únicos)
///////////////////////////////////////////////////////////////////////////////

UNWIND [
  {id:"u1",  name:"Ana"},
  {id:"u2",  name:"Bruno"},
  {id:"u3",  name:"Carlos"},
  {id:"u4",  name:"Daniela"},
  {id:"u5",  name:"Eduardo"},
  {id:"u6",  name:"Fernanda"},
  {id:"u7",  name:"Gabriel"},
  {id:"u8",  name:"Helena"},
  {id:"u9",  name:"Lucas"},
  {id:"u10", name:"Mariana"}
] AS user
CREATE (:User {id: user.id, name: user.name});


///////////////////////////////////////////////////////////////////////////////
// 3. MOVIES (5 filmes)
///////////////////////////////////////////////////////////////////////////////

UNWIND [
  "Inception",
  "Interstellar",
  "The Matrix",
  "Gladiator",
  "Titanic"
] AS title
CREATE (:Movie {title: title});


///////////////////////////////////////////////////////////////////////////////
// 4. SERIES (5 séries)
///////////////////////////////////////////////////////////////////////////////

UNWIND [
  "Breaking Bad",
  "Dark",
  "The Wire",
  "Peaky Blinders",
  "Narcos"
] AS title
CREATE (:Series {title: title});


///////////////////////////////////////////////////////////////////////////////
// 5. GENRES (10 gêneros)
///////////////////////////////////////////////////////////////////////////////

UNWIND [
  "Drama",
  "Action",
  "Sci-Fi",
  "Crime",
  "Thriller",
  "Romance",
  "Adventure",
  "Fantasy",
  "Comedy",
  "Horror"
] AS name
CREATE (:Genre {name: name});


///////////////////////////////////////////////////////////////////////////////
// 6. ACTORS (10 atores)
///////////////////////////////////////////////////////////////////////////////

UNWIND [
  "Leonardo DiCaprio",
  "Christian Bale",
  "Brad Pitt",
  "Emma Stone",
  "Tom Hanks",
  "Scarlett Johansson",
  "Natalie Portman",
  "Robert De Niro",
  "Denzel Washington",
  "Meryl Streep"
] AS name
CREATE (:Actor {name: name});


///////////////////////////////////////////////////////////////////////////////
// 7. DIRECTORS (10 diretores)
///////////////////////////////////////////////////////////////////////////////

UNWIND [
  "Christopher Nolan",
  "Steven Spielberg",
  "Martin Scorsese",
  "Quentin Tarantino",
  "James Cameron",
  "Ridley Scott",
  "Denis Villeneuve",
  "Greta Gerwig",
  "Pedro Almodóvar",
  "Alfonso Cuarón"
] AS name
CREATE (:Director {name: name});


///////////////////////////////////////////////////////////////////////////////
// 8. RELACIONAMENTOS: USER -> WATCHED -> MOVIE (com rating)
///////////////////////////////////////////////////////////////////////////////

MATCH (u:User), (m:Movie)
WHERE rand() < 0.4
CREATE (u)-[:WATCHED {rating: toInteger(rand() * 5) + 1}]->(m);


///////////////////////////////////////////////////////////////////////////////
// 9. RELACIONAMENTOS: USER -> WATCHED -> SERIES (com rating)
///////////////////////////////////////////////////////////////////////////////

MATCH (u:User), (s:Series)
WHERE rand() < 0.4
CREATE (u)-[:WATCHED {rating: toInteger(rand() * 5) + 1}]->(s);


///////////////////////////////////////////////////////////////////////////////
// 10. RELACIONAMENTOS: ACTOR -> ACTED_IN -> MOVIE
///////////////////////////////////////////////////////////////////////////////

MATCH (a:Actor), (m:Movie)
WHERE rand() < 0.3
CREATE (a)-[:ACTED_IN]->(m);


///////////////////////////////////////////////////////////////////////////////
// 11. RELACIONAMENTOS: ACTOR -> ACTED_IN -> SERIES
///////////////////////////////////////////////////////////////////////////////

MATCH (a:Actor), (s:Series)
WHERE rand() < 0.3
CREATE (a)-[:ACTED_IN]->(s);


///////////////////////////////////////////////////////////////////////////////
// 12. RELACIONAMENTOS: DIRECTOR -> DIRECTED -> MOVIE
///////////////////////////////////////////////////////////////////////////////

MATCH (d:Director), (m:Movie)
WHERE rand() < 0.3
CREATE (d)-[:DIRECTED]->(m);


///////////////////////////////////////////////////////////////////////////////
// 13. RELACIONAMENTOS: DIRECTOR -> DIRECTED -> SERIES
///////////////////////////////////////////////////////////////////////////////

MATCH (d:Director), (s:Series)
WHERE rand() < 0.3
CREATE (d)-[:DIRECTED]->(s);


///////////////////////////////////////////////////////////////////////////////
// 14. RELACIONAMENTOS: MOVIE -> IN_GENRE -> GENRE
///////////////////////////////////////////////////////////////////////////////

MATCH (m:Movie), (g:Genre)
WHERE rand() < 0.3
CREATE (m)-[:IN_GENRE]->(g);


///////////////////////////////////////////////////////////////////////////////
// 15. RELACIONAMENTOS: SERIES -> IN_GENRE -> GENRE
///////////////////////////////////////////////////////////////////////////////

MATCH (s:Series), (g:Genre)
WHERE rand() < 0.3
CREATE (s)-[:IN_GENRE]->(g);
